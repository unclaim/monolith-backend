# internal/auth/api/handlers.go - –î–≤–µ—Ä–∏ –≤ –î–æ–º–∏–∫ "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è" üö™
–≠—Ç–∞ –ø–∞–ø–∫–∞ ‚Äî –∫–∞–∫ –¥–≤–µ—Ä–∏, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏ —Å—Ç—É—á–∞—Ç—Å—è –≤ –Ω–∞—à –¥–æ–º–∏–∫ "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è". –ö–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ —Ö–æ—á–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–ª–∏ –≤–æ–π—Ç–∏, –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∏–º–µ–Ω–Ω–æ —Å—é–¥–∞. –≠—Ç–∏ –¥–≤–µ—Ä–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∑–∞–ø—Ä–æ—Å, –ø—Ä–æ–≤–µ—Ä—è—é—Ç –µ–≥–æ, –∞ –∑–∞—Ç–µ–º –ø—Ä–æ—Å—è—Ç "–≥–ª–∞–≤–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞" (—Å–µ—Ä–≤–∏—Å) –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω—É–∂–Ω—É—é –∑–∞–¥–∞—á—É. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–Ω–∏ –∫—Ä–∞—Å–∏–≤–æ —É–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç –æ—Ç–≤–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ.
–ì–¥–µ —ç—Ç–æ: your-ultra-scalable-monolith/internal/auth/api/handlers.go
–ß—Ç–æ –∑–¥–µ—Å—å:
–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤: –ó–¥–µ—Å—å –∫–æ–¥ "—Å–ª—É—à–∞–µ—Ç", —á—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –ª—é–¥–∏ (–ø–æ–ª—É—á–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã).
–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö: –û–Ω —Å–º–æ—Ç—Ä–∏—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ —Ñ–æ—Ä–º–∞—Ç email –∏–ª–∏ –ø–∞—Ä–æ–ª—è). –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫, –æ–Ω —Å—Ä–∞–∑—É –≥–æ–≤–æ—Ä–∏—Ç –æ–± –æ—à–∏–±–∫–µ.
–ü–µ—Ä–µ–¥–∞—á–∞ –∑–∞–¥–∞—á–∏ —Å–µ—Ä–≤–∏—Å—É: –ï—Å–ª–∏ –≤—Å–µ —Ö–æ—Ä–æ—à–æ, –æ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç "–≥–ª–∞–≤–Ω–æ–º—É —Ä–∞–±–æ—Ç–Ω–∏–∫—É" (–Ω–∞—à–µ–º—É domain/service.go) –∫–æ–º–∞–Ω–¥—É –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–æ, —á—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è").
–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞: –ü–æ–ª—É—á–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç "–≥–ª–∞–≤–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞", –æ–Ω —Å–æ–∑–¥–∞–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã!" –∏–ª–∏ "–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫").
–ü—Ä–∏–º–µ—Ä:

```go
package api

import (
	"encoding/json" // –î–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON-–¥–∞–Ω–Ω—ã–º–∏
	"net/http"      // –î–ª—è —Ä–∞–±–æ—Ç—ã —Å HTTP-–∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –æ—Ç–≤–µ—Ç–∞–º–∏
	"log/slog"      // –î–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤

	"your-app-name/internal/auth/domain"         // –ù–∞—à –¥–æ–º–µ–Ω "Auth"
	"your-app-name/internal/shared/common_errors" // –û–±—â–∏–µ –æ—à–∏–±–∫–∏
	"your-app-name/internal/shared/validator"    // –ù–∞—à –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
)

// Handlers —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—à–∏ HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –¥–æ–º–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
// –û–Ω "–∑–Ω–∞–µ—Ç" –æ —Å–µ—Ä–≤–∏—Å–µ, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ä–∞–±–æ—Ç—É.
type Handlers struct {
	authService domain.AuthService // –≠—Ç–æ –Ω–∞—à "–≥–ª–∞–≤–Ω—ã–π —Ä–∞–±–æ—Ç–Ω–∏–∫" –¥–æ–º–∏–∫–∞ Auth
	logger      *slog.Logger       // –ù–∞—à –ª–æ–≥–≥–µ—Ä
}

// NewHandlers —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –¥–≤–µ—Ä–∏ –¥–ª—è –¥–æ–º–∏–∫–∞ Auth.
func NewHandlers(authService domain.AuthService, logger *slog.Logger) *Handlers {
	return &Handlers{
		authService: authService,
		logger:      logger,
	}
}

// RegisterRequest - —ç—Ç–æ –∫–∞–∫ "—Ñ–æ—Ä–º–∞", –∫–æ—Ç–æ—Ä—É—é –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
type RegisterRequest struct {
	Email    string `json:"email" validate:"required,email"`      // –ü–æ—á—Ç–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–æ—Ä–º–∞—Ç email
	Password string `json:"password" validate:"required,min=8"`   // –ü–∞—Ä–æ–ª—å, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏ –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤
}

// @Summary –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
// @Description –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ email.
// @Tags auth
// @Accept json
// @Produce json
// @Param user_data body RegisterRequest true "–î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
// @Success 202 {object} map[string]string "–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω"
// @Failure 400 {object} common_errors.ErrorResponse "–ù–µ–≤–µ—Ä–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
// @Failure 500 {object} common_errors.ErrorResponse "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
// @Router /auth/register [post]
// Register - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é.
func (h *Handlers) Register(w http.ResponseWriter, r *http.Request) {
	var req RegisterRequest
	// 1. –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ (–∫–∞–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ñ–æ—Ä–º—É).
	if err := json.NewDecoder(r.Body).Decode(&req); err != nil {
		h.logger.Error("–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å –∑–∞–ø—Ä–æ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏", "error", err)
		common_errors.SendJSONError(w, common_errors.NewBadRequestError("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞"), http.StatusBadRequest)
		return
	}

	// 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ñ–æ—Ä–º–∞).
	if err := validator.ValidateStruct(req); err != nil {
		h.logger.Warn("–ù–µ–≤–µ—Ä–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏", "error", err)
		common_errors.SendJSONError(w, common_errors.NewBadRequestError(err.Error()), http.StatusBadRequest)
		return
	}

	// 3. –ü–µ—Ä–µ–¥–∞–µ–º –∑–∞–¥–∞—á—É "–≥–ª–∞–≤–Ω–æ–º—É —Ä–∞–±–æ—Ç–Ω–∏–∫—É" (—Å–µ—Ä–≤–∏—Å—É).
	_, err := h.authService.RegisterUser(r.Context(), req.Email, req.Password)
	if err != nil {
		h.logger.Error("–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è", "email", req.Email, "error", err)
		// –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É —Å–µ—Ä–≤–∏—Å–∞ –≤ HTTP-–æ—Ç–≤–µ—Ç
		common_errors.SendJSONError(w, err, common_errors.HTTPStatusFromError(err))
		return
	}

	// 4. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç.
	w.WriteHeader(http.StatusAccepted) // –ü—Ä–∏–Ω—è—Ç–æ, –Ω–æ –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ (–∂–¥–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email)
	json.NewEncoder(w).Encode(map[string]string{"message": "–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É"})
}

// ... –î—Ä—É–≥–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏: Login, VerifyEmail, CompleteRegistration –∏ —Ç.–¥.


```